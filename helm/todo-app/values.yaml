# Todo App Helm Chart - Parent Values
# This file contains global settings and defaults for subcharts

# Global settings applied to all subcharts
global:
  imagePullPolicy: Never  # Use local images in Minikube
  nodeEnv: production

# Frontend subchart configuration
frontend:
  enabled: true
  replicaCount: 1

  image:
    repository: todo-frontend
    tag: local
    pullPolicy: Never

  service:
    type: NodePort
    port: 80
    targetPort: 3000
    nodePort: 30080

  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

  livenessProbe:
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 10
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 5
    periodSeconds: 5

  env:
    NEXT_PUBLIC_API_URL: "http://todo-backend:80"

# Backend subchart configuration
backend:
  enabled: true
  replicaCount: 1

  image:
    repository: todo-backend
    tag: local
    pullPolicy: Never

  service:
    type: NodePort
    port: 80
    targetPort: 8000
    nodePort: 30081

  resources:
    requests:
      cpu: "200m"
      memory: "256Mi"
    limits:
      cpu: "1000m"
      memory: "1Gi"

  livenessProbe:
    httpGet:
      path: /health
      port: 8000
    initialDelaySeconds: 15
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /health
      port: 8000
    initialDelaySeconds: 10
    periodSeconds: 5

  # Non-sensitive configuration (ConfigMap)
  config:
    PYTHONUNBUFFERED: "1"
    LOG_LEVEL: "INFO"

  # Sensitive configuration (Secret)
  # These values should be overridden in values-secrets.yaml or via --set
  secrets:
    DATABASE_URL: ""
    GEMINI_API_KEY: ""
    SECRET_KEY: ""
